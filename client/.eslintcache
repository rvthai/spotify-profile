[{"D:\\projects\\spotify-profile\\client\\src\\styles\\Button.js":"1","D:\\projects\\spotify-profile\\client\\src\\styles\\Label.js":"2","D:\\projects\\spotify-profile\\client\\src\\pages\\Profile.js":"3","D:\\projects\\spotify-profile\\client\\src\\components\\Loader.js":"4","D:\\projects\\spotify-profile\\client\\src\\pages\\TopTracks.js":"5","D:\\projects\\spotify-profile\\client\\src\\components\\Track.js":"6","D:\\projects\\spotify-profile\\client\\src\\styles\\Nav.js":"7","D:\\projects\\spotify-profile\\client\\src\\components\\Navbar.js":"8","D:\\projects\\spotify-profile\\client\\src\\assets\\icons\\PauseIcon.js":"9","D:\\projects\\spotify-profile\\client\\src\\assets\\icons\\PlayIcon.js":"10","D:\\projects\\spotify-profile\\client\\src\\utils\\index.js":"11","D:\\projects\\spotify-profile\\client\\src\\index.js":"12","D:\\projects\\spotify-profile\\client\\src\\styles\\Header.js":"13","D:\\projects\\spotify-profile\\client\\src\\styles\\Main.js":"14","D:\\projects\\spotify-profile\\client\\src\\styles\\theme.js":"15","D:\\projects\\spotify-profile\\client\\src\\assets\\icons\\NoMusicIcon.js":"16","D:\\projects\\spotify-profile\\client\\src\\styles\\PageHeader.js":"17","D:\\projects\\spotify-profile\\client\\src\\pages\\TopArtists.js":"18","D:\\projects\\spotify-profile\\client\\src\\pages\\TopGenres.js":"19","D:\\projects\\spotify-profile\\client\\src\\components\\Ranges.js":"20","D:\\projects\\spotify-profile\\client\\src\\styles\\media.js":"21","D:\\projects\\spotify-profile\\client\\src\\styles\\Image.js":"22","D:\\projects\\spotify-profile\\client\\src\\assets\\icons\\InfoIcon.js":"23","D:\\projects\\spotify-profile\\client\\src\\styles\\Section.js":"24","D:\\projects\\spotify-profile\\client\\src\\styles\\GlobalStyle.js":"25","D:\\projects\\spotify-profile\\client\\src\\components\\Home.js":"26","D:\\projects\\spotify-profile\\client\\src\\components\\Genre.js":"27","D:\\projects\\spotify-profile\\client\\src\\components\\Trend.js":"28","D:\\projects\\spotify-profile\\client\\src\\styles\\mixins.js":"29","D:\\projects\\spotify-profile\\client\\src\\components\\ArtistBubble.js":"30","D:\\projects\\spotify-profile\\client\\src\\pages\\ArtistPage.js":"31","D:\\projects\\spotify-profile\\client\\src\\pages\\PageNotFound.js":"32","D:\\projects\\spotify-profile\\client\\src\\assets\\icons\\BackIcon.js":"33","D:\\projects\\spotify-profile\\client\\src\\components\\User.js":"34"},{"size":327,"mtime":1611534692277,"results":"35","hashOfConfig":"36"},{"size":212,"mtime":1611873765276,"results":"37","hashOfConfig":"36"},{"size":6114,"mtime":1612227830737,"results":"38","hashOfConfig":"36"},{"size":1311,"mtime":1612227911922,"results":"39","hashOfConfig":"36"},{"size":2934,"mtime":1612324781989,"results":"40","hashOfConfig":"36"},{"size":3804,"mtime":1612311259998,"results":"41","hashOfConfig":"36"},{"size":560,"mtime":1612210279948,"results":"42","hashOfConfig":"36"},{"size":2559,"mtime":1612329958491,"results":"43","hashOfConfig":"36"},{"size":339,"mtime":1612211032920,"results":"44","hashOfConfig":"36"},{"size":403,"mtime":1612211201769,"results":"45","hashOfConfig":"36"},{"size":6182,"mtime":1612300389743,"results":"46","hashOfConfig":"36"},{"size":440,"mtime":1606772367305,"results":"47","hashOfConfig":"36"},{"size":327,"mtime":1612153669066,"results":"48","hashOfConfig":"36"},{"size":483,"mtime":1612324470931,"results":"49","hashOfConfig":"36"},{"size":689,"mtime":1612224096096,"results":"50","hashOfConfig":"36"},{"size":570,"mtime":1612225382423,"results":"51","hashOfConfig":"36"},{"size":343,"mtime":1612324742315,"results":"52","hashOfConfig":"36"},{"size":2585,"mtime":1612327549353,"results":"53","hashOfConfig":"36"},{"size":5133,"mtime":1612227058646,"results":"54","hashOfConfig":"36"},{"size":1499,"mtime":1612325166492,"results":"55","hashOfConfig":"36"},{"size":441,"mtime":1612324318649,"results":"56","hashOfConfig":"36"},{"size":140,"mtime":1612312121340,"results":"57","hashOfConfig":"36"},{"size":552,"mtime":1612302314206,"results":"58","hashOfConfig":"36"},{"size":322,"mtime":1612153669067,"results":"59","hashOfConfig":"36"},{"size":2043,"mtime":1612153669066,"results":"60","hashOfConfig":"36"},{"size":1288,"mtime":1612312487317,"results":"61","hashOfConfig":"36"},{"size":1005,"mtime":1611873765241,"results":"62","hashOfConfig":"36"},{"size":2560,"mtime":1611873765270,"results":"63","hashOfConfig":"36"},{"size":1019,"mtime":1612325157008,"results":"64","hashOfConfig":"36"},{"size":2782,"mtime":1612327289283,"results":"65","hashOfConfig":"36"},{"size":2494,"mtime":1612330580362,"results":"66","hashOfConfig":"36"},{"size":890,"mtime":1612328766049,"results":"67","hashOfConfig":"36"},{"size":522,"mtime":1612329161242,"results":"68","hashOfConfig":"36"},{"size":2386,"mtime":1612331048740,"results":"69","hashOfConfig":"36"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},"15cb6kc",{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"77","messages":"78","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"89"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"109","messages":"110","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"111","usedDeprecatedRules":"89"},{"filePath":"112","messages":"113","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"114","messages":"115","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"116","messages":"117","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"118","messages":"119","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"120","messages":"121","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"122","messages":"123","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"89"},{"filePath":"124","messages":"125","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"126","messages":"127","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"128","messages":"129","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"130","messages":"131","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"132","messages":"133","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"134","messages":"135","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"136","messages":"137","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"138","messages":"139","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"140","messages":"141","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"D:\\projects\\spotify-profile\\client\\src\\styles\\Button.js",[],["142","143"],"D:\\projects\\spotify-profile\\client\\src\\styles\\Label.js",[],"D:\\projects\\spotify-profile\\client\\src\\pages\\Profile.js",["144","145","146","147"],"D:\\projects\\spotify-profile\\client\\src\\components\\Loader.js",["148"],"D:\\projects\\spotify-profile\\client\\src\\pages\\TopTracks.js",[],"D:\\projects\\spotify-profile\\client\\src\\components\\Track.js",[],"D:\\projects\\spotify-profile\\client\\src\\styles\\Nav.js",[],"D:\\projects\\spotify-profile\\client\\src\\components\\Navbar.js",[],"D:\\projects\\spotify-profile\\client\\src\\assets\\icons\\PauseIcon.js",[],["149","150"],"D:\\projects\\spotify-profile\\client\\src\\assets\\icons\\PlayIcon.js",[],"D:\\projects\\spotify-profile\\client\\src\\utils\\index.js",[],"D:\\projects\\spotify-profile\\client\\src\\index.js",[],["151","152"],"D:\\projects\\spotify-profile\\client\\src\\styles\\Header.js",[],"D:\\projects\\spotify-profile\\client\\src\\styles\\Main.js",[],"D:\\projects\\spotify-profile\\client\\src\\styles\\theme.js",[],"D:\\projects\\spotify-profile\\client\\src\\assets\\icons\\NoMusicIcon.js",[],"D:\\projects\\spotify-profile\\client\\src\\styles\\PageHeader.js",[],"D:\\projects\\spotify-profile\\client\\src\\pages\\TopArtists.js",[],"D:\\projects\\spotify-profile\\client\\src\\pages\\TopGenres.js",["153"],"import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\n// API\r\nimport { getTopTracks, getSeveralArtists } from \"utils\";\r\n\r\n// Components\r\nimport Ranges from \"components/Ranges\";\r\nimport Genre from \"components/Genre\";\r\n\r\n// Styles\r\nimport { Main, Section, Header } from \"styles\";\r\nimport { theme } from \"styles\";\r\n\r\nconst { color } = theme;\r\n\r\nconst HeaderA = styled(Header)`\r\n  border: none;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  margin-bottom: 2em;\r\n`;\r\nconst Title = styled.h1`\r\n  margin: 0;\r\n`;\r\n\r\nconst Bars = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  margin-top: 1em;\r\n`;\r\n\r\nconst Axis = styled.div`\r\n  width: 100%;\r\n  height: 1px;\r\n  background: ${color.gray};\r\n  margin: 1em 0;\r\n`;\r\n\r\nfunction TopGenres(props) {\r\n  // Data for genre data\r\n  const [topGenres, setTopGenres] = useState(null);\r\n  const [total, setTotal] = useState(0);\r\n  const [max, setMax] = useState(0);\r\n  const ratio = Math.round(max / 10) * 10;\r\n  const percent = 80;\r\n  const [term, setTerm] = useState(\"long_term\");\r\n\r\n  const [axisData, setAxisData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getTopGenres();\r\n\r\n    if (max !== 0) {\r\n      const limit = Math.ceil(max / 10) * 10;\r\n      const interval = limit / 5;\r\n      let range = [];\r\n\r\n      for (let i = 0; i <= limit; i += interval) {\r\n        range.push(i);\r\n      }\r\n\r\n      setAxisData(range);\r\n    }\r\n  }, [max, term]);\r\n\r\n  const getTopGenres = async () => {\r\n    // Get the top tracks\r\n    const response = await getTopTracks({\r\n      time_range: term,\r\n      limit: 50,\r\n    });\r\n    const tracks = response.data.items;\r\n\r\n    // Get the id of the first artist of each track\r\n    const artists = [];\r\n    for (let i = 0; i < tracks.length; i++) {\r\n      const artist = tracks[i].artists[0];\r\n      if (!artists.includes(artist)) {\r\n        artists.push(artist.id);\r\n      }\r\n    }\r\n\r\n    // Since the getSeveralArtist API has a max limit of 50, we must split up the list if there is more than 50 artists\r\n    let artists_groups = [];\r\n    while (artists.length > 0) {\r\n      if (artists.length >= 50) {\r\n        artists_groups.push(artists.splice(0, 50)); // this gets 50 artists and modifies the array\r\n      } else {\r\n        artists_groups.push(artists.splice(0, artists.length)); // up to the end of the array if less than 50\r\n      }\r\n    }\r\n\r\n    // Make an API call to get the artists and their genres\r\n    let data = null;\r\n    for (let i = 0; i < artists_groups.length; i++) {\r\n      let id_str = artists_groups[i].join(\",\"); // Join a group of artists into a full string to be passed as a query param\r\n      let response = await getSeveralArtists(id_str); // Make the API call\r\n      data = response.data.artists;\r\n    }\r\n\r\n    // Create a map of each genre and their occurence\r\n    let genresMap = {};\r\n    for (let i = 0; i < data.length; i++) {\r\n      let genres = data[i].genres;\r\n      for (let j = 0; j < genres.length; j++) {\r\n        let genre = genres[j];\r\n        if (!genresMap[genre]) {\r\n          genresMap[genre] = 0;\r\n        }\r\n        genresMap[genre] += 1;\r\n      }\r\n    }\r\n\r\n    // Get the top five genres that occur the most by sorting the object (must convert object to array first)\r\n    let entries = Object.entries(genresMap);\r\n    entries.sort((a, b) => b[1] - a[1]);\r\n    entries = entries.splice(0, 10);\r\n\r\n    // Get the total needed to calculate the percentages for the chart\r\n    const t = entries.reduce((accumulator, entry) => accumulator + entry[1], 0);\r\n    //setTotal(total);\r\n    const m = entries.reduce(\r\n      (accumulator, entry) => Math.max(accumulator, entry[1]),\r\n      0\r\n    );\r\n    //setMax((m / t) * 100);\r\n\r\n    // Remake map with top five genres and their respective percentages\r\n    genresMap = entries.reduce((accumulator, entry) => {\r\n      const key = entry[0];\r\n      const value = Math.round((entry[1] / t) * 100); // Convert to a percentage\r\n      accumulator[key] = value;\r\n      return accumulator;\r\n    }, {});\r\n\r\n    // Change state\r\n    setTopGenres(genresMap);\r\n    setMax((m / t) * 100);\r\n    setTotal(total);\r\n  };\r\n\r\n  const onTermChange = (t) => {\r\n    setTerm(t);\r\n  };\r\n\r\n  return (\r\n    <Main>\r\n      <Section>\r\n        <HeaderA>\r\n          <Title>Top Genres</Title>\r\n          <Ranges onTermChange={onTermChange} />\r\n        </HeaderA>\r\n        {topGenres ? (\r\n          <Bars>\r\n            {Object.keys(topGenres).map((genre, index) => (\r\n              <Genre\r\n                key={index}\r\n                name={genre}\r\n                width={(topGenres[genre] / ratio) * percent}\r\n                percentage={topGenres[genre]}\r\n              />\r\n            ))}\r\n          </Bars>\r\n        ) : null}\r\n        <Axis />\r\n        <div\r\n          style={{\r\n            width: \"100%\",\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n          }}\r\n        >\r\n          {axisData.map((num, index) => (\r\n            <p style={{ color: `${color.gray}` }} key={index}>\r\n              {num}\r\n            </p>\r\n          ))}\r\n        </div>\r\n      </Section>\r\n    </Main>\r\n  );\r\n}\r\n\r\nexport default TopGenres;\r\n","D:\\projects\\spotify-profile\\client\\src\\components\\Ranges.js",["154"],"D:\\projects\\spotify-profile\\client\\src\\styles\\media.js",[],"D:\\projects\\spotify-profile\\client\\src\\styles\\Image.js",[],"D:\\projects\\spotify-profile\\client\\src\\assets\\icons\\InfoIcon.js",[],"D:\\projects\\spotify-profile\\client\\src\\styles\\Section.js",[],"D:\\projects\\spotify-profile\\client\\src\\styles\\GlobalStyle.js",[],"D:\\projects\\spotify-profile\\client\\src\\components\\Home.js",[],"D:\\projects\\spotify-profile\\client\\src\\components\\Genre.js",["155","156","157","158"],"D:\\projects\\spotify-profile\\client\\src\\components\\Trend.js",["159"],"D:\\projects\\spotify-profile\\client\\src\\styles\\mixins.js",[],"D:\\projects\\spotify-profile\\client\\src\\components\\ArtistBubble.js",[],"D:\\projects\\spotify-profile\\client\\src\\pages\\ArtistPage.js",["160"],"D:\\projects\\spotify-profile\\client\\src\\pages\\PageNotFound.js",["161"],"D:\\projects\\spotify-profile\\client\\src\\assets\\icons\\BackIcon.js",[],"D:\\projects\\spotify-profile\\client\\src\\components\\User.js",["162"],{"ruleId":"163","replacedBy":"164"},{"ruleId":"165","replacedBy":"166"},{"ruleId":"167","severity":1,"message":"168","line":15,"column":8,"nodeType":"169","messageId":"170","endLine":15,"endColumn":21},{"ruleId":"167","severity":1,"message":"171","line":28,"column":10,"nodeType":"169","messageId":"170","endLine":28,"endColumn":25},{"ruleId":"167","severity":1,"message":"172","line":29,"column":10,"nodeType":"169","messageId":"170","endLine":29,"endColumn":26},{"ruleId":"173","severity":1,"message":"174","line":47,"column":6,"nodeType":"175","endLine":47,"endColumn":8,"suggestions":"176"},{"ruleId":"167","severity":1,"message":"177","line":3,"column":10,"nodeType":"169","messageId":"170","endLine":3,"endColumn":15},{"ruleId":"163","replacedBy":"178"},{"ruleId":"165","replacedBy":"179"},{"ruleId":"163","replacedBy":"180"},{"ruleId":"165","replacedBy":"181"},{"ruleId":"173","severity":1,"message":"174","line":66,"column":6,"nodeType":"175","endLine":66,"endColumn":17,"suggestions":"182"},{"ruleId":"167","severity":1,"message":"183","line":3,"column":25,"nodeType":"169","messageId":"170","endLine":3,"endColumn":30},{"ruleId":"167","severity":1,"message":"184","line":1,"column":17,"nodeType":"169","messageId":"170","endLine":1,"endColumn":26},{"ruleId":"167","severity":1,"message":"185","line":1,"column":28,"nodeType":"169","messageId":"170","endLine":1,"endColumn":36},{"ruleId":"167","severity":1,"message":"186","line":5,"column":10,"nodeType":"169","messageId":"170","endLine":5,"endColumn":14},{"ruleId":"167","severity":1,"message":"187","line":37,"column":24,"nodeType":"169","messageId":"170","endLine":37,"endColumn":34},{"ruleId":"167","severity":1,"message":"188","line":6,"column":24,"nodeType":"169","messageId":"170","endLine":6,"endColumn":30},{"ruleId":"167","severity":1,"message":"189","line":8,"column":16,"nodeType":"169","messageId":"170","endLine":8,"endColumn":26},{"ruleId":"167","severity":1,"message":"189","line":7,"column":16,"nodeType":"169","messageId":"170","endLine":7,"endColumn":26},{"ruleId":"167","severity":1,"message":"190","line":4,"column":8,"nodeType":"169","messageId":"170","endLine":4,"endColumn":14},"no-native-reassign",["191"],"no-negated-in-lhs",["192"],"no-unused-vars","'TrendsPreview' is defined but never used.","Identifier","unusedVar","'currentTopTrack' is assigned a value but never used.","'currentTopArtist' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getTopGenres'. Either include it or remove the dependency array.","ArrayExpression",["193"],"'theme' is defined but never used.",["191"],["192"],["191"],["192"],["194"],"'media' is defined but never used.","'useEffect' is defined but never used.","'useState' is defined but never used.","'Text' is defined but never used.","'percentage' is assigned a value but never used.","'Button' is defined but never used.","'fontWeight' is assigned a value but never used.","'Logout' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"195","fix":"196"},{"desc":"197","fix":"198"},"Update the dependencies array to be: [getTopGenres]",{"range":"199","text":"200"},"Update the dependencies array to be: [getTopGenres, max, term]",{"range":"201","text":"202"},[1304,1306],"[getTopGenres]",[1427,1438],"[getTopGenres, max, term]"]